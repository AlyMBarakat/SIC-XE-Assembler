COPY	START	1000
FIRST	STL	LENGTH
-	LDB	#LENGTH
-	BASE	LENGTH
CLOOP	+JSUB	RDREC
-	LDA	1000
-	COMP	#0
-	JEQ	ENDFIL
-	+JSUB	WRREC
-	J	CLOOP
ENDFIL	LDA	EOF
-	STA	BUFFER
-	LDA	#3
-	STA	LENGTH
-	+JSUB	WRREC
-	J	@RETADR
EOF	BYTE	C'EOF'
RETADR	RESW	1
BUFFER	RESB	4096
LENGTH	RESW	1
RDREC	CLEAR	X
-	CLEAR	A
-	CLEAR	S
-	+LDT	#4096
RLOOP	TD	=C'F'
-	JEQ	RLOOP
-	RD	=X'20' 
-	COMPR	A,S
-	JEQ	EXIT
-	STCH	BUFFER,X
-	TIXR	T
-	JLT	RLOOP
-	LTORG	-
-	RD	=X'45' 
EXIT	STX	LENGTH
-	RSUB	-
INPUT	BYTE	X'F1'
WRREC	CLEAR	X
-	LDT	LENGTH
TEMP	EQU	RDREC - RETADR + 100
NOW	EQU	*
WLOOP	TD	OUTPUT
-	JEQ	WLOOP
-	LDCH	BUFFER,X
-	WD	OUTPUT
-	TIXR	T
-	JLT	WLOOP
-	RSUB	-
OUTPUT	BYTE	X'05'
-	END	FIRST